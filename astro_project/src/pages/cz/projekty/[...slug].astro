---
import { getAugmentedProjects } from '../../../utils/getProjectImageMetadata';
import Layout from '../../../layouts/Layout.astro';
import ProjectDetail from '../../../components/ProjectDetail.astro';

export async function getStaticPaths() {
  const czProjects = await getAugmentedProjects('cz');

  const paths = czProjects.map(project => {
    const slugForUrl = project.slug.replace(/\/index..*$/, '');
    return {
      params: { slug: slugForUrl },
      props: { lang: 'cz', slug: project.slug },
    };
  });
  return paths;
}
const { lang, slug } = Astro.props;
const allProjects = await getAugmentedProjects(lang);
const project = allProjects.find(p => p.slug === slug);
---

<Layout title={project.data.title}>
    {project && <ProjectDetail project={project} lang={lang} allProjects={allProjects} />}
</Layout>
