---
import { getOptimizedImageAttributes } from '../utils/imageUtils';
import type { HTMLAttributes } from 'astro/types';
import type { ImageMetadata } from 'astro';

export interface Props extends HTMLAttributes<'div'> {
	className?: string;
	imgSrc?: string;
	imgAlt?: string;
}

const { id, className="", imgSrc="/assets/img/hero-2800w.jpg", imgAlt="Vizualizácia domu" } = Astro.props;

const imageLoaders = import.meta.glob<{ default: ImageMetadata }>('/src/assets/img/*.{jpeg,jpg,png,gif,webp,heic}');
const { src: mainSrc, srcset: srcSet } = await getOptimizedImageAttributes(
    imgSrc,
    [768, 1024, 1400, 2100, 2800],
    imageLoaders,
    'Hero.astro'
);
---
<div class={`hero ${className}`}>
	<div class="grid-x">
		<div class="hero__img cell medium-6 large-7">
			<img src={mainSrc} 
				srcset={srcSet} 
				sizes="(min-width: 40em) 58vw, (min-width: 35em) 110vw, 38.75rem" alt={imgAlt}>
			<div class="overlay"></div>
			<a class="hero__arrow" href="#sluzby" data-smooth-scroll data-animation-easing="swing" data-offset="-24" title="Prejsť na obsah">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="none"><path d="m38.562 28.061-13.5 13.5a1.498 1.498 0 0 1-2.122 0l-13.5-13.5a1.501 1.501 0 0 1 2.122-2.122l10.939 10.94V7.5a1.5 1.5 0 0 1 3 0v29.38L36.44 25.938a1.5 1.5 0 0 1 2.122 2.122Z" fill="#023333"/></svg>
			</a>
		</div>
		<div class="hero__content cell medium-6 large-5">
			<h1><slot /></h1>
			<div class="overlay"></div>
		</div>
	</div>
</div>